[toc]



# æˆç»©ç®¡ç†ç³»ç»Ÿ

## æ•ˆæœå±•ç¤º

### ç™»å½•

#### è‡ªåŠ¨ç™»å½•_æˆåŠŸ

![è‡ªåŠ¨ç™»å½•_æˆåŠŸ](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E8%87%AA%E5%8A%A8%E7%99%BB%E5%BD%95_%E6%88%90%E5%8A%9F.gif)

#### æ‰‹åŠ¨ç™»å½•_æˆåŠŸ

![æ‰‹åŠ¨ç™»å½•_æˆåŠŸ](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E6%89%8B%E5%8A%A8%E7%99%BB%E5%BD%95_%E6%88%90%E5%8A%9F.gif)

#### æ‰‹åŠ¨ç™»å½•_å¤±è´¥æµ‹è¯•

![æ‰‹åŠ¨ç™»å½•_å¤±è´¥æµ‹è¯•](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E6%89%8B%E5%8A%A8%E7%99%BB%E5%BD%95_%E5%A4%B1%E8%B4%A5%E6%B5%8B%E8%AF%95.gif)



### è‡ªåŠ¨åŠ è½½æ–‡ä»¶ä¿¡æ¯ï¼ˆå¢åŠ ä¿¡æ¯ï¼‰

![è‡ªåŠ¨åŠ è½½æ–‡ä»¶ä¿¡æ¯](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E8%87%AA%E5%8A%A8%E5%8A%A0%E8%BD%BD%E6%96%87%E4%BB%B6%E4%BF%A1%E6%81%AF.gif)

### åˆ é™¤

#### åˆ é™¤è¯¾ç¨‹

![åˆ é™¤è¯¾ç¨‹](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E5%88%A0%E9%99%A4%E8%AF%BE%E7%A8%8B.gif)

#### åˆ é™¤å­¦ç”Ÿ

![åˆ é™¤å­¦ç”Ÿ](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E5%88%A0%E9%99%A4%E5%AD%A6%E7%94%9F.gif)

### æŸ¥çœ‹

![æŸ¥çœ‹åŠŸèƒ½](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E6%9F%A5%E7%9C%8B%E5%8A%9F%E8%83%BD.gif)

### ä¿®æ”¹

#### ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯

![ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E4%BF%AE%E6%94%B9%E8%AF%BE%E7%A8%8B%E4%BF%A1%E6%81%AF.gif)

#### ä¿®æ”¹å­¦ç”Ÿæˆç»©

![ä¿®æ”¹å­¦ç”Ÿæˆç»©](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E4%BF%AE%E6%94%B9%E5%AD%A6%E7%94%9F%E6%88%90%E7%BB%A9.gif)

#### ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯

![ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E4%BF%AE%E6%94%B9%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF.gif)

### æ’åº

#### æŒ‰å­¦å·è¿›è¡Œæ’åº

![æŒ‰å­¦å·è¿›è¡Œæ’åº](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E6%8C%89%E5%AD%A6%E5%8F%B7%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F.gif)

#### æŒ‰æ€»åˆ†è¿›è¡Œæ’åº

![æŒ‰æ€»åˆ†è¿›è¡Œæ’åº](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E6%8C%89%E6%80%BB%E5%88%86%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F.gif)

#### æ‰¾åˆ°å•ç§‘æœ€é«˜åˆ†

![æ‰¾åˆ°å•ç§‘æœ€é«˜åˆ†](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E6%89%BE%E5%88%B0%E5%8D%95%E7%A7%91%E6%9C%80%E9%AB%98%E5%88%86.gif)

#### æŒ‰å•ç§‘æˆç»©è¿›è¡Œæ’åº

![æŒ‰å•ç§‘æˆç»©è¿›è¡Œæ’åº](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/%E6%8C%89%E5%8D%95%E7%A7%91%E6%88%90%E7%BB%A9%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F.gif)



## ä»£ç å‰é“ºå«

å†™ä»£ç å‰è‚¯å®šæ˜¯è¦è®¾è®¡å¥½ç±»çš„ã€‚

```mermaid
graph LR
A(æˆç»©ç®¡ç†ç³»ç»Ÿ)-->B(å­¦ç”Ÿæ€»æˆç»©å•)
A-->C(è¯¾ç¨‹æˆç»©å•)-.-ä»æ€»æˆç»©å•ä¸­æ‹¿æ•°æ®-.->B
A-->D(å­¦ç”Ÿä¿¡æ¯è¡¨)
A-->E(è¯¾ç¨‹ä¿¡æ¯è¡¨)

```



### åˆ†æ

æˆç»©ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«å­¦ç”Ÿæ€»æˆç»©å•ï¼Œè¯¾ç¨‹æˆç»©å•ï¼Œå­¦ç”Ÿä¿¡æ¯è¡¨ï¼Œè¯¾ç¨‹ä¿¡æ¯è¡¨ã€‚å…¶ä¸­è¯¾ç¨‹æˆç»©å•å’Œå­¦ç”Ÿæ€»æˆç»©å•å­˜åœ¨æ•°æ®ç›¸åŒï¼Œæ‰€ä»¥éœ€è¦å¤„ç†æ•°æ®å†—ä½™çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘å†³å®šåªå­˜ä¸€ä»½æ•°æ®ï¼Œè¯¾ç¨‹æˆç»©å•çš„æ•°æ®ä»æ€»æˆç»©å•è·å–ï¼Œæ­¤æ—¶æˆ‘ä¿®æ”¹æ€»æˆç»©å•è‡ªç„¶è¯¾ç¨‹æˆç»©å•ä¹Ÿéšä¹‹æ”¹å˜ã€‚ã€

### ç»“æ„

é“¾è¡¨ï¼Œé¡ºåºè¡¨ï¼Œå †æ ˆï¼Œæ ‘ç­‰ç”¨å“ªç§ç»“æ„å¥½ä¸€ç‚¹ï¼Ÿ

æˆç»©ç®¡ç†å¸¸ç”¨çš„è‚¯å®šçš„å¢åˆ æŸ¥ï¼Œä¿®æ”¹å€’ä¸é¢‘ç¹ã€‚åœ¨å¢åˆ æ–¹é¢é¡ºåºè¡¨å’Œé“¾è¡¨å„æœ‰ä¼˜åŠ£ï¼Œå †æ ˆä¸å¥½æŸ¥æ‰¾ã€‚æ˜¾ç„¶å¯¹äºå¢åˆ æŸ¥æ¥è¯´çº¢é»‘æ ‘æ˜¯ä¸€ç§å¾ˆå¥½çš„ç»“æ„ï¼Œå¯¹åº”åˆ°STLé‡Œå°±æ˜¯mapå’Œsetäº†

>æ­¤å¤„å°è¯äº†å­¦ä¹ äºŒå‰æœç´¢æ ‘æ—¶çš„ä¸€ä¸ªè§‚ç‚¹ï¼šäºŒå‰æœç´¢æ ‘æ˜¯å¯¹é“¾è¡¨å’Œé¡ºåºè¡¨çš„ä¸€ç§æŠ˜ä¸­
>
>ä¼ é€é—¨ğŸ‘‰ğŸ‘‰[äºŒå‰æœç´¢æ ‘ç¬”è®°åŠæ¨¡æ‹Ÿå®ç°_](https://blog.csdn.net/m0_53005929/article/details/124414105?spm=1001.2014.3001.5501)

### ä»£ç é£æ ¼

å°‘ç”¨typedefï¼Œé¿å…å‡½æ•°çš„å¤šå±‚åµŒå¥—ï¼ŒåŸºäºè¿™ä¸¤ç‚¹æˆ‘å¯¹ä»£ç è¿›è¡Œäº†ä¸€æ¬¡é‡å†™ï¼Œä½¿å…¶å°½é‡ç»“æ„æ¸…æ™°å’Œå¥½ç†è§£

> å°‘ç”¨typedefï¼šä¿è¯ä»£ç çš„å¯è¯»æ€§ï¼Œä¸ç„¶ä¸€ä¸ªç±»å‹è¾—è½¬å‡ ä¸ªtypedefç¡®å®ç¦»è°±
>
> é¿å…å¤šå±‚åµŒå¥—:åœ¨é˜…è¯»ä»£ç æ—¶æŠŠæˆ‘ä»¬çš„è„‘å­æ¯”ä½œä¸€ä¸ªæ ˆï¼Œæ¯”å¦‚ä»å‡½æ•°Aè·³åˆ°å¦ä¸€ä¸ªå‡½æ•°Bæ—¶æˆ‘ä»¬è‚¯å®šè¦ä¿å­˜è¿›å…¥å‡½æ•°Bæ—¶Açš„çŠ¶æ€ï¼Œä¹‹åè¿˜å¾—ä¸€å±‚ä¸€å±‚é€’å½’å›æ¥ï¼Œæ‰€ä»¥åµŒå¥—å±‚æ•°å¤ªå¤šåæˆ‘ä»¬å°±è®°ä¸ä½äº†ã€‚ã€‚ã€‚æ‰€ä»¥å»ºè®®é¿å…å¤šå±‚åµŒå¥—
>
> æ­¤å¤–ï¼Œä¸ºäº†ä»£ç çš„ç»“æ„å°½å¯èƒ½æ¸…æ™°ï¼Œé‡‡ç”¨äº†å¤šä¸ªå®å®šä¹‰ï¼Œä½†å…¶å®å†™å®Œåï¼Œè§‰å¾—ç”¨å‡½æ•°ä»£æ›¿å¯èƒ½å¥½ä¸€ç‚¹ã€‚å› ä¸ºå®çš„ç¼ºç‚¹ä¹‹ä¸€å°±æ˜¯ä¸å¥½è°ƒè¯•ï¼Œå†™ä»£ç è¿‡ç¨‹ä¸­å‡ºäº†bugä¸å¥½è°ƒè¯•ï¼Œä½†æ˜¯ç”¨å®åˆæ›´æ–¹ä¾¿ï¼Œæ­¤å¤„å„æœ‰åˆ©å¼Šï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è‡ªå·±é€‰æ‹©...

### ç”¨åˆ°çš„çŸ¥è¯†ç‚¹

- C++çš„å…¥é—¨è¯­æ³•å³IOæµç›¸å…³çŸ¥è¯†
- ç¼“å†²åŒºç›¸å…³çŸ¥è¯†ï¼Œç”¨æ¥å¤„ç†éæ³•è¾“å…¥å’Œè¾“å…¥åŠ å¯†ï¼ˆå³è¾“å…¥çš„å¯†ç ä¼šè¢«*ä»£æ›¿ï¼‰ã€‚
- STLå®¹å™¨çš„ä½¿ç”¨ï¼Œå…¶ä¸­åŒ…æ‹¬å¯¹mapè¿›è¡Œè‡ªå®šä¹‰ç±»å‹æ’åºå’Œæ„é€ è‡ªå®šä¹‰ç±»å‹çš„map/setã€‚
- äº›è®¸Windowsç¼–ç¨‹   ~~æˆ‘ä¹Ÿåªæ˜¯å¥—å£³ä½¿ç”¨~~

æ‰‹åŠ¨è¾“å…¥é”™è¯¯æ•°æ®å¯èƒ½å¯¼è‡´åŸæœ‰æ•°æ®è¢«åˆ é™¤ è¿™ä¸ªå¾—å¯¹è¾“å…¥æ•°æ®è¿›è¡Œåˆ¤æ–­

## ä»£ç åˆ†æ

### **<font color=40E0D0>GradeManagement.h</font>**

è¿™é‡Œå£°æ˜äº†éœ€è¦ç”¨åˆ°çš„ç±»å‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º

![image-20220515205508887](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515205508887.png)

#### ä¸€é—¨è¯¾ç¨‹çš„æˆç»©

```c++
enum TestStatus//è€ƒè¯•çŠ¶æ€
{
	NotNormal,
	Normal
};
struct CourseGrade
{
	friend class GradeTable;
	friend void Output();
	CourseGrade(){}
	CourseGrade(int couid)
		:_cou_id(couid)
	{}
	int _cou_id;
	int _grade;
	TestStatus _ts;
	//è¿™é‡Œå¿…é¡»é‡è½½å°äº
	bool operator<(const CourseGrade& course_grade) const
	{
		if (course_grade._cou_id < _cou_id)
		{
			return true;
		}
		return false;
	}
	friend ostream& operator<<(ostream& out, const CourseGrade& cou);
};
```

![image-20220515210143425](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515210143425.png)

#### å­¦ç”Ÿä¿¡æ¯å’Œè¯¾ç¨‹ä¿¡æ¯

```c++
struct Student
{
	friend void Output();
	int _id;//é»˜è®¤å­¦å·å…«ä½ å¯¹éæ³•è¾“å…¥è¿›è¡Œå¤„ç†
	size_t _age = 0;
	string _sex = "ç”·";
	string _name = "å¼ ä¸‰";
	bool operator<(const Student& stu)
	{
		if (_id < stu._id)
		{
			return true;
		}
		return false;
	}
};
struct Course
{
	friend void Output();
	int _id;
	string _name;
	double _credit;
	set<string> _teacher_name;
};
```

![image-20220515210725945](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515210725945.png)



#### å­¦ç”Ÿä¿¡æ¯è¡¨

```c++
class StuTable//å­¦ç”Ÿä¿¡æ¯è¡¨
{
public:
	friend void Erase();
	friend void Update();
	friend void Sort();
	friend void Output();
	friend class GradeTable;
	void LoadingFile_Stu();
	void Hand_EnterInfo();
private:
	map<int, Student> _stu_table;//å­¦å·ä¸å­¦ç”Ÿä¿¡æ¯å¯¹åº”
	bool Judge(int stuid)//å­¦å·å­˜åœ¨è¿”å›false ä¸å­˜åœ¨è¿”å›true
	{
		pair<map<int, Student>::iterator, bool>judge = _stu_table.insert(make_pair(stuid, Student()));
		return judge.second;
	}
};
```

![image-20220515211157906](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515211157906.png)

#### è¯¾ç¨‹ä¿¡æ¯è¡¨

```c++
class CouTable//è¯¾ç¨‹ä¿¡æ¯è¡¨
{
public:
	friend ostream& operator<<(ostream& out, const CourseGrade& cou);
	friend void Erase();
	friend void Update();
	friend void Sort();
	friend void Output();
	void LoadingFile_Cou();
	void Hand_EnterInfo();
private:
	map<int, Course> _cou_table;//è¯¾ç¨‹å·å’Œè¯¾ç¨‹
	bool Judge(int couid)
	{
		pair<map<int, Course>::iterator, bool>judge = _cou_table.insert(make_pair(couid, Course()));
		return judge.second;
	}
};
```

![image-20220515211452421](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515211452421.png)

#### æ€»æˆç»©å•

```c++
class GradeTable
{
public:
	friend void Erase();
	friend void Output();
	friend void Update();
	friend void Sort();
	void LoadingFile_Grade();
	void Hand_EnterGrade();
	//è¿™é‡Œå°±æ˜¯è¾“å‡ºæˆç»©å•  å¯¹æˆç»©è¿›è¡Œæ’åºç­‰æ“ä½œ æ‰¾å‡ºæˆç»©æœ€å¥½çš„æˆç»©ç­‰
private:
	map<int, set<CourseGrade>> _stu_grade;//å­¦å·--æˆç»©  å…³è”å­¦å·å’Œè‡ªå·±çš„æˆç»©  æˆç»©å•
	bool Judge(int stuid,int couid)//è¯¾ç¨‹æˆç»©å·²ç»å­˜åœ¨è¿”å›false ä¸å­˜åœ¨è¿”å›true
	{
		set<CourseGrade>& PersonGrade = _stu_grade[stuid];
		for (auto e : PersonGrade)
		{
			if (e._cou_id == couid)
			{
				return false;
			}
		}
		return true;
		
	}
};
```

![image-20220515211834544](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515211834544.png)



#### è¯¾ç¨‹æˆç»©å•

```c++
class CouseGradeTable//å¯¹è¯¾ç¨‹æˆç»©å•è¿›è¡Œæ“ä½œ 
{
public:
	friend void Erase();
	friend void Output();
	friend void Update();
	friend void Sort();
	friend void GradeTable::LoadingFile_Grade();
	friend void GradeTable::Hand_EnterGrade();
private:
	map<int, set<int>>_cou_grade;//è¯¾ç¨‹å·--å­¦å·é›†åˆ  è¯¾ç¨‹æˆç»©å•è¦æˆç»©ä»æˆç»©å•é‡Œå»æ‹¿

};
```

![image-20220515212030928](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515212030928.png)

### **<font color=40E0D0>operator.h</font>**

#### ç”¨æ¥è¾“å…¥çš„å®

opæ˜¯ä¸€ä¸ªå˜é‡ï¼Œè¾“å…¥opæ¥å¯¹æˆç»©å•è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œç”±äºopä½¿ç”¨ååˆ†é¢‘ç¹

æ‰€ä»¥å®šä¹‰ä¸€ä¸ªäº†ä¸€ä¸ªå®æ¥è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚

- è¾“å…¥åˆç†çš„é0å€¼-->æ­£å¸¸è¿è¡Œ

- è¾“å…¥åˆç†çš„0å€¼-->é€€å‡ºå½“å‰æ“ä½œï¼Œä»£ç è¡¨ç°ä¸ºç›´æ¥returnç»“æŸå‡½æ•°

- è¾“å…¥éæ³•åˆ¶-->æ‰“å°é”™è¯¯ä¿¡æ¯å†é€€å‡º

```c++
#pragma once
#include "GradeManagement.h"
StuTable stable;
GradeTable gtable;
CouTable ctable;
CouseGradeTable cgtable;

#define _OP_SITUATION op = InputOp(op, optional, sop);\
switch (op)\
{\
case -1:\
	PrintError();\
	return;\
case 0:\
	return;\
case 1:\
	break;\
}	
```

![image-20220515212810031](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515212810031.png)



#### æ‰“å°èœå•çš„å®

MENUå°±æ˜¯ä¸€ä¸ªæ‰“å°èœå•çš„å®ï¼Œä½¿ç”¨MENUå°±ä¼šæ‰“å°èœå•

>  **opè¾“å…¥1å°±æ˜¯å½•å…¥å­¦ç”Ÿä¿¡æ¯**

```c++
#define MENU printf("****************************************************\n");\
printf("*                                                  *\n");\
printf("*                   æˆç»©ç®¡ç†ç³»ç»Ÿ                   *\n");\
printf("*                                                  *\n");\
printf("*                                                  *\n");\
printf("*                   1.å½•å…¥å­¦ç”Ÿä¿¡æ¯                 *\n");\
printf("*                   2.å½•å…¥è¯¾ç¨‹ä¿¡æ¯                 *\n");\
printf("*                   3.å½•å…¥å­¦ç”Ÿæˆç»©                 *\n");\
printf("*                   4.æŸ¥çœ‹                         *\n");\
printf("*                   5.åˆ é™¤                         *\n");\
printf("*                   6.ä¿®æ”¹                         *\n");\
printf("*                   7.æŒ‰æˆç»©è¿›è¡Œæ’åº               *\n");\
printf("*                   8.è‡ªåŠ¨å½•å…¥ä¿¡æ¯                 *\n");\
printf("*                   0.é€€å‡º                         *\n");\
printf("*                                                  *\n");\
printf("****************************************************\n");
```

![image-20220515213131214](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515213131214.png)



#### ç™»å½•å¤±è´¥åç”¨äºé‡æ–°ç™»å½•çš„å®

è¿›å…¥æˆç»©ç®¡ç†å‰éœ€è¦å…ˆè¿›è¡Œç™»å½•ï¼Œç™»é™†å¤±è´¥åéœ€è¦å¯¹å¤±è´¥çš„æƒ…å†µè¿›è¡Œå¤„ç†

```c++
#define _AGAIN_LOGIN cout << endl;\
system("color 0c"); system("cls");\
printf("\n\nè‡ªåŠ¨ç™»å½•å¤±è´¥,è¯·é‡æ–°è¾“å…¥\n");\
printf("****************************\n\n");\
printf("1.æ‰‹åŠ¨ç™»å½• 2.è‡ªåŠ¨ç™»å½• 0. é€€å‡º\n\n");\
printf("****************************\n");\
printf("è¯·è¾“å…¥ï¼š-> ");\
_OP_SITUATION \
system("cls");
```

![image-20220515213313720](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515213313720.png)

> system("cls")æ˜¯ä»€ä¹ˆï¼ŸWindowsä¸‹C++çš„è¾“å‡ºç»ˆç«¯æ˜¯æ§åˆ¶å°ï¼ˆå°±æ˜¯é‚£ä¸ªé»‘æ¡†æ¡†,ä¹Ÿå¯ä»¥è¯´æ˜¯cmdï¼‰
>
> system("cls") å°±ç›¸å½“äºåœ¨cmdç•Œé¢è¾“å…¥clså‘½ä»¤ï¼Œcmdä¸­clså‘½ä»¤çš„ä½œç”¨æ˜¯æ¸…å±
>
> system("color 0c")è¡¨ç¤ºåœ¨cmdä¸‹è¾“å…¥â€color 0câ€œå‘½ä»¤,color xyè¡¨ç¤ºæ›´æ”¹èƒŒæ™¯å’Œå­—ä½“é¢œè‰²ï¼Œxè¡¨ç¤ºèƒŒæ™¯ï¼Œyè¡¨ç¤ºå­—ä½“
>
> ![image-20220515214311752](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515214311752.png)



#### æ£€æŸ¥å­¦ç”Ÿå’Œè¯¾ç¨‹å±æ€§çš„åˆç†æ€§

```c++
#define _CHECK_STU_NAME(name)  if (name.size() <= 0 || name.size() > 50) {PrintError();stable._stu_table.erase(stuid); return;} \
for (auto e : name)\
{\
	if (e >= '0' && e <= '9') {PrintError();stable._stu_table.erase(stuid);return;}\
}//è§„å®šå­¦ç”Ÿå§“åä¸­ä¸èƒ½æœ‰æ•°å­—ä¸”åå­—ä¸èƒ½è¿‡é•¿
#define  _CHECK_STU_ID(id) if (id < 10000000 || id>99999999) {PrintError();stable._stu_table.erase(stuid); return;}//è§„å®šå­¦å·å¿…é¡»æ˜¯8ä½
#define  _CHECK_AGE(age) if (age < 0 || age >= 200) {PrintError();stable._stu_table.erase(stuid); return;}//è§„å®šå­¦ç”Ÿå¹´é¾„åœ¨0-200ä¹‹é—´
#define _CHECK_SEX(sex) if (sex != "ç”·" && sex != "å¥³") {PrintError();stable._stu_table.erase(stuid); return;}//è§„å®šæ€§åˆ«åªæœ‰ç”·å¥³

#define _CHECK_COURSE_NAME(name)  if (name.size() <= 0 || name.size() > 50) {PrintError();ctable._cou_table.erase(couid); return;} \
for (auto e : name)\
{\
	if (e >= '0' && e <= '9') {PrintError();ctable._cou_table.erase(couid); return;}\
}//è§„å®šè€å¸ˆå§“åä¸­ä¸èƒ½æœ‰æ•°å­—ä¸”åå­—ä¸èƒ½è¿‡é•¿
#define _CHECK_COURSE_ID(id) if(id<0||id>10000)  {PrintError();ctable._cou_table.erase(couid); return;}//è§„å®šå­¦å·åœ¨1-1000ä¹‹é—´
#define _CHECK_COURSE_NAME(name)  if (name.size() <= 0 || name.size() > 50||(name[0]>='0'&&name[0]<='9'))\
{PrintError(); ctable._cou_table.erase(couid); return;} //è§„å®šè¯¾ç¨‹åå­—ä¸èƒ½å¤ªé•¿ä¸”ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸èƒ½æ˜¯æ•°å­—

#define _CHECK_CREDIT(credit)  if(credit<0||credit>30) {PrintError();  ctable._cou_table.erase(couid); return;}//è§„å®šå­¦åˆ†åœ¨0-30ä¹‹é—´

#define _GIVE_TEST_STATIS(ts)  if (ts == 0)\
{\
	cousegrade._ts = NotNormal;\
	cousegrade._grade = 0;\
}\
else\
{\
	cousegrade._ts = Normal;\
}//æ ¹æ®è¾“å…¥çš„tsç»™è€ƒè¯•ä¸€ä¸ªçŠ¶æ€ï¼ˆtsä¸º0è¡¨ç¤ºè€ƒè¯•çŠ¶æ€ä¸æ­£å¸¸ï¼Œå¦‚ä½œå¼Šç¼ºè€ƒç­‰,tsä¸º1è¡¨ç¤ºè€ƒè¯•çŠ¶æ€æ­£å¸¸ï¼‰
```

![image-20220515214639156](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515214639156.png)



#### æ£€æŸ¥è¾“å…¥æ˜¯å¦åˆç†

![image-20220515215222637](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515215222637.png)

å±•å¼€ä»£ç 

```c++
vector<int>op_01;
vector<int>op_012;
vector<int>op_04;
vector<int>op_05;
vector<int>op_09;
void InitOption()//åˆå§‹åŒ–op_xxæ•°ç»„
{
	for (int i = 0; i <= 1; i++)
	{
		op_01.push_back(i);
	}
	for (int i = 0; i <= 2; i++)
	{
		op_012.push_back(i);
	}
	for (int i = 0; i < 4; i++)
	{
		op_04.push_back(i);
	}
	for (int i = 0; i < 5; i++)
	{
		op_05.push_back(i);
	}
	for (int i = 0; i < 9; i++)
	{
		op_09.push_back(i);
	}
}
void SetColor(int hex );
bool CheckOp(int& op,set<int>&sop )//æ£€æŸ¥sopé‡Œæ˜¯å¦å­˜åœ¨op
{
	if (sop.find(op)!=sop.end())
	{
		return true;
	}
	return false;
}
void InitSetOp(vector<int>& optional, int n, set<int>& sop)//ç”¨optionalçš„å€¼åˆå§‹åŒ–sop
{
	for (int i = 0; i < n; i++)
	{
		sop.insert(optional[i]);
	}
}
int InputOp(int& op,vector<int>& optional, set<int>& sop)
{
	InitSetOp(optional,optional.size() , sop);
	cin >> op; 
	if (cin.bad())
	{
		SetColor(0x04);
		cout << "IOæµå‡ºç°æœªçŸ¥é”™è¯¯" << endl;
		return -1;
	}
	else if (cin.fail())
	{
		SetColor(0x04);
		cout << "ç¼“å†²åŒºå‡ºç°è„/æ®‹ç•™æ•°æ®,è‡´ä½¿è¾“å…¥é”™è¯¯" << endl;//ç®€å•æ¥è¯´cinæ²¡æœ‰è¯»åˆ°æ•°æ®
		cin.clear();
		cin.ignore(INT_MAX,'\n');		
		return -1;
	}
	else if(CheckOp(op, sop))
	{
		char ch = getchar();				
		if (ch == '\n' || ch == ' ')//çœ‹åé¢æœ‰æ— å¤šä½™çš„æ•°æ® å¤„ç†å¦‚â€6vybuijâ€œè¿™æ ·çš„æ•°æ®
		{
			return op;
		}
		else
		{
			return -1;
		}
		/*string str;//è‹¥è¦æå–éæ³•æ•°æ®å¯ä»¥ç”¨è¿™ç§åŠæ³•ï¼ˆå‰ææ˜¯æœ‰éæ³•æ•°æ®ï¼‰
		getline(cin, str);
		if (str.empty())
		{
			return op;
		}*/	
	}
	else
	{
		cin.ignore(INT_MAX, '\n');
		return -1;
	}	
}
void PrintError()
{
	SetColor(0x04);
	printf("\n\nè¾“å…¥æœ‰è¯¯,é€€å‡ºå½“å‰ç•Œé¢\n\n");
	Sleep(1200);
}
```

> å…¶ä¸­å‡½æ•°InputOp(ï¼‰ååˆ†é‡è¦ã€‚å¯ä»¥å‚è€ƒä»£ç æ³¨é‡Š
>
> cinæœ¬è´¨æ˜¯istreamå®ä¾‹åŒ–å‡ºæ¥çš„ä¸€ä¸ªå¯¹è±¡  æ‰€ä»¥å¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°
>
> [std::basic_istream - C++ä¸­æ–‡ - APIå‚è€ƒæ–‡æ¡£ (apiref.com)](https://www.apiref.com/cpp-zh/cpp/io/basic_istream.html)
>
> [std::basic_istream::ignore - C++ä¸­æ–‡ - APIå‚è€ƒæ–‡æ¡£ (apiref.com)](https://www.apiref.com/cpp-zh/cpp/io/basic_istream/ignore.html)
>
> æ­¤å¤–ï¼Œç½‘ä¸ŠæŸ¥é˜…èµ„æ–™è¯´cin.sync() å¯ä»¥æ¸…ç©ºæµï¼Œæˆ‘ç”¨VSæµ‹è¯•åå‘ç°ä¸è¡Œï¼Œå¯èƒ½æ˜¯ç”±äºç¼–è¯‘å™¨å®ç°ä¸åŒå¯¼è‡´æ²¡è¾¾åˆ°æ¸…ç©ºç¼“å†²åŒºçš„æ•ˆæœ
>
> äºæ˜¯ç”¨cin.ignore(INT_MAX, '\n');ä»£æ›¿
>
> cin.ignore()  å¾—ç»™ä¸¤ä¸ªå‚æ•°ï¼Œä¸ç»™å‚æ•°ä¼šæ­»å¾ªç¯,å› ä¸ºignoreç¬¬ä¸€ä¸ªå‚æ•°çš„ç¼ºçœå€¼æ˜¯1ï¼Œå³åªå¿½ç•¥ä¸€ä¸ªå­—ç¬¦ï¼Œç¬¬äºŒä¸ªå‚æ•°é»˜è®¤çš„ç¼ºçœå€¼æ˜¯EOF
>
> ç¼“å†²åŒºæœ€åä¸€ä¸ªå­—ç¬¦ä¸æ˜¯EOF
>
> ```c++
> //æµ‹è¯•cin.sync()
> int test3()
> {
> 	int op;
> 	cin >> op;
> 	if (cin.bad())
> 	{
> 		cout << "IOæµå‡ºç°æœªçŸ¥é”™è¯¯" << endl;
> 	}
> 	else if (cin.fail())
> 	{
> 		cout << "ç¼“å†²åŒºå‡ºç°è„/æ®‹ç•™æ•°æ®" << endl;
> 		cin.clear();
> 		cin.ignore(INT_MAX,'\n');//è¯»åˆ°\nåœæ­¢
> 		/*if (cin.sync() == 0)//æµ‹è¯•æ— æ•ˆ
> 		{
> 			printf("æˆåŠŸæ¸…é™¤æµ\n");//æˆåŠŸæ‰§è¡Œcin.sync()è¿”å›0
> 		}*/
> 	}
> 	cout << op << endl;
> 	return 0;
> }
> //æµ‹è¯•è¾“å…¥ï¼šbuijnklgiubn
> ```



#### å½•å…¥å­¦ç”Ÿä¿¡æ¯

è¯»å–æ–‡ä»¶æˆ–è€…æ˜¯æ‰‹åŠ¨å½•å…¥ï¼Œæ‰‹åŠ¨å½•å…¥çš„ä¿¡æ¯ä¼šå†æ¬¡è¢«å†™è¿›æ–‡ä»¶ï¼Œä»¥ä¾¿ä¸‹æ¬¡ç›´æ¥è¯»å–

![image-20220515221324884](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515221324884.png)

> [C++å¦‚ä½•åˆ¤æ–­æ–‡ä»¶ä¸ºç©º | rootcheese](https://rootcheese.com/?p=411)
>
> å€¼å¾—ä¸€æçš„æ˜¯æ–‡æœ¬æ–‡ä»¶çš„æ ¼å¼å’Œæ–‡ä»¶å¦‚ä½•åˆ¤ç©º
>
> ![image-20220515221655473](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515221655473.png)

```c++
void StuTable::LoadingFile_Stu()
{
	ifstream ifs("stu_info.txt");
	if (!ifs)
	{
		cout << "å­¦ç”Ÿä¿¡æ¯æ–‡ä»¶ä¸å­˜åœ¨" << endl;
		return;
	}
	int stuid;
	char ch;
	ifs >> ch;//æ–‡ä»¶ä¸ºç©ºæ—¶ä¼šæœ‰ä¸€ä¸ªå­—ç¬¦ å¾—å…ˆæŠŠè¿™ä¸ªå­—ç¬¦è¯»å‡ºæ¥  (æ–‡ä»¶æ‰“å¼€æ˜¯åˆå§‹åŒ–çŠ¶æ€ï¼Œè¯»åˆ°EOFç³»ç»Ÿæ‰ä¼šæŠŠæ–‡ä»¶çŠ¶æ€æ›´æ”¹ä¸ºæ–‡ä»¶å°¾
	//eof()æ˜¯æ ¹æ®æ–‡ä»¶çŠ¶æ€æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸ºç©º  æ‰€ä»¥å¾—å…ˆå°è¯•è¯»å–ä¸€ä¸ªå­—ç¬¦æ”¹å˜å…¶çŠ¶æ€
	if (ifs.eof())
	{
		cout << "æ–‡ä»¶ä¸ºç©º" << endl;
		return;
	}
	while (!ifs.eof())//æ–‡ä»¶çš„æœ€åä¸€è¡Œåˆ«åŠ æ¢è¡Œ ä¸ç„¶æ²¡è¯»åˆ°å°¾å¯¼è‡´æœ€åä¸€è¡Œæ•°æ®è¯»ä¸¤æ¬¡
	{
		ifs >> stuid;
		if (Judge(stuid)==false)
		{
			//printf("è¯»å–åˆ°é‡å¤æ•°æ®ï¼Œè¯·å‹¿é‡å¤è¯»å–\n");
			//return;
			_stu_table.erase(stuid);//æœ‰çš„è¯å°±åˆ æ‰å†æ’å…¥å®ç°è¦†ç›–
		}
		_stu_table[stuid]._id = stuid;
		ifs >> _stu_table[stuid]._name;
		ifs >> _stu_table[stuid]._age;
		ifs >> _stu_table[stuid]._sex;
	}	
	cout << "å­¦ç”Ÿä¿¡æ¯å½•å…¥å®Œæ¯•" << endl;
}
void StuTable::Hand_EnterInfo()
{
	ofstream ofs("stu_info.txt",ios_base::app);
	int stuid;
	printf("è¯·è¾“å…¥å­¦å·ï¼š-> "); 
	cin >> stuid;	 
	if (Judge(stuid)==false)
	{
		printf("è¯¥å­¦ç”Ÿå·²ç»å­˜åœ¨ æ­¤æ¬¡è¾“å…¥å°†ä¼šè¦†ç›–åŸæœ¬ä¿¡æ¯ æ˜¯å¦ç»§ç»­ï¼Ÿ\n");
		printf("0. é€€å‡º 1. ç»§ç»­\n");
		int op; 
		printf("è¯·è¾“å…¥ï¼š-> ");
		vector<int>optional(op_01);
		set<int>sop;
		_OP_SITUATION
	}
	stable._stu_table.erase(stuid);
	Student& input = stable._stu_table[stuid];		_CHECK_STU_ID(stuid)
		input._id = stuid;
	printf("è¯·è¾“å…¥å§“åï¼š-> "); cin >> input._name;	_CHECK_STU_NAME(input._name)  
	printf("è¯·è¾“å…¥å¹´é¾„ï¼š-> "); cin >> input._age;		_CHECK_AGE(input._age) 
	printf("è¯·è¾“å…¥æ€§åˆ«ï¼š-> "); cin >> input._sex;		_CHECK_SEX(input._sex)
		ofs << '\n' << '\n' << stuid;
	ofs << " " << input._name; 
	ofs << " " << input._age;	
	ofs << " " << input._sex;
	printf("å½•å…¥æˆåŠŸ\n");
	
}
void Input_EnterStuInfo()
{
	int op;	
	printf("1.åŠ è½½å­¦ç”Ÿä¿¡æ¯æ–‡ä»¶   2.æ‰‹åŠ¨å½•å…¥  0.é€€å‡º\n");
	printf("è¯·è¾“å…¥ï¼š-> "); 
	vector<int>optional(op_012);
	set<int>sop;
	_OP_SITUATION
	while (op)
	{
		if (op == 1)
		{
			stable.LoadingFile_Stu();
		}
		else if (op == 2)
		{
			stable.Hand_EnterInfo();
			 
		}
		else if(op==0)
		{
			break;
		}
		else
		{
			cout << "è¾“å…¥é”™è¯¯ï¼Œé€€å‡ºã€‚" << endl;
			break;
		}
		printf("\nç»§ç»­å½•å…¥å—ï¼Ÿ"); printf("1.åŠ è½½å­¦ç”Ÿæ–‡ä»¶   2.æ‰‹åŠ¨å½•å…¥  0.é€€å‡º\n");
		printf("è¯·è¾“å…¥:-> "); 
		_OP_SITUATION
	}
}
```

#### å½•å…¥è¯¾ç¨‹ä¿¡æ¯

å’Œå½•å…¥å­¦ç”Ÿä¿¡æ¯åŒç†

![image-20220515221945660](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515221945660.png)

```c++
void CouTable::LoadingFile_Cou()
{
	ifstream ifs("cou_info.txt");
	FILE* pf=fopen("cou_info.txt","r");
	
	if (!ifs)
	{
		cout << "è¯¾ç¨‹ä¿¡æ¯æ–‡ä»¶ä¸å­˜åœ¨" << endl;
		return;
	}
	int couid;
	char ch;
	ifs >> ch;//æ–‡ä»¶ä¸ºç©ºæ—¶ä¼šæœ‰ä¸€ä¸ªå­—ç¬¦ å¾—å…ˆæŠŠè¿™ä¸ªå­—ç¬¦è¯»å‡ºæ¥
	if (ifs.eof())
	{
		cout << "æ–‡ä»¶ä¸ºç©º" << endl;
		return;
	}
	while (!ifs.eof())//æ–‡ä»¶çš„æœ€åä¸€è¡Œåˆ«åŠ æ¢è¡Œ ä¸ç„¶æ²¡è¯»åˆ°å°¾å¯¼è‡´æœ€åä¸€è¡Œæ•°æ®è¯»ä¸¤æ¬¡
	{
		ifs >> couid;
		if (Judge(couid) == false)
		{
			/*printf("è¯»å–åˆ°é‡å¤æ•°æ®ï¼Œè¯·å‹¿é‡å¤è¯»å–\n");
			return;*/
			_cou_table.erase(couid);//æœ‰çš„è¯å°±åˆ æ‰å†æ’å…¥å®ç°è¦†ç›–
		}
		_cou_table[couid]._id = couid;
		ifs >> _cou_table[couid]._name;
		ifs >> _cou_table[couid]._credit;
		ch = ' '; string teacher_name;
		while (ch != '\n'&&ch!=EOF)
		{
			ifs >> teacher_name;
			_cou_table[couid]._teacher_name .insert(teacher_name);
			ch = ifs.get();			
		}
	}
	cout << "è¯¾ç¨‹ä¿¡æ¯å½•å…¥å®Œæ¯•" << endl;
}
void CouTable::Hand_EnterInfo()
{
	ofstream ofs("cou_info.txt", ios_base::app);//è¿½åŠ 
	int couid;
	printf("è¯·è¾“å…¥è¯¾ç¨‹å·ï¼š-> "); cin >> couid;	
	if (Judge(couid) == false)
	{
		printf("è¯¥è¯¾ç¨‹å·²ç»å­˜åœ¨ æ­¤æ¬¡è¾“å…¥å°†ä¼šè¦†ç›–åŸæœ¬ä¿¡æ¯ æ˜¯å¦ç»§ç»­ï¼Ÿ\n");
		printf("0. é€€å‡º 1. ç»§ç»­\n");
		int op;
		printf("è¯·è¾“å…¥ï¼š-> ");
		vector<int>optional(op_01);
		set<int>sop;
		_OP_SITUATION
	}
	ctable._cou_table.erase(couid);
	Course& input = ctable._cou_table[couid]; _CHECK_COURSE_ID(couid)
	input._id = couid;
	printf("è¯·è¾“å…¥è¯¾ç¨‹åï¼š-> "); cin >> input._name;	_CHECK_COURSE_NAME(input._name)
	printf("è¯·è¾“å…¥å­¦åˆ†ï¼š-> "); cin >> input._credit;	_CHECK_CREDIT(input._credit)
	printf("æ‚¨å¯ä»¥è¾“å…¥å¤šä½è€å¸ˆçš„åå­—ï¼Œä¸­é—´ç”¨ç©ºæ ¼é—´éš”å³å¯\n");
	printf("è¯·è¾“å…¥æˆè¯¾è€å¸ˆåå­—ï¼š->");
	string str; getchar();
	getline(cin, str);  _CHECK_COURSE_NAME(str)
	for (int i = 0; i < str.size(); )
	{
		int left = i;
		int right = left + 1;
		while (right < str.size() && str[right] != '\0')
		{
			if (str[right] == ' ')
			{
				 break;
			}
			else
			{
				right++;
			}
		}
		i = right;
		string ans = str.substr(left, right);
		ans += '\0';
		_cou_table[couid]._teacher_name.insert(ans);
	}
	ofs << "\n\n" <<setw(4)<<setfill('0')<< couid << ' ' << input._name << ' ' << input._credit << ' ' << str;
	printf("å½•å…¥æˆåŠŸ\n");
	
}
void Input_EnterCouInfo()
{
	int op;
	printf("1.åŠ è½½è¯¾ç¨‹ä¿¡æ¯æ–‡ä»¶   2.æ‰‹åŠ¨å½•å…¥  0.é€€å‡º\n");
	printf("è¯·è¾“å…¥ï¼š-> "); 
	vector<int>optional(op_012);
	set<int>sop;
	_OP_SITUATION
	while (op)
	{
		if (op == 1)
		{
			ctable.LoadingFile_Cou();
		}
		else if (op == 2)
		{
			ctable.Hand_EnterInfo();
		}
		else if (op == 0)
		{
			break;
		}
		else
		{
			cout << "è¾“å…¥é”™è¯¯ï¼Œé€€å‡ºã€‚" << endl;
			break;
		}
		printf("\nç»§ç»­å½•å…¥å—ï¼Ÿ"); printf("1.åŠ è½½è¯¾ç¨‹ä¿¡æ¯æ–‡ä»¶   2.æ‰‹åŠ¨å½•å…¥  0.é€€å‡º\n");
		printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
	}
}
```

#### å½•å…¥å­¦ç”Ÿæˆç»©

å’Œä¸Šé¢ä¸€æ ·ä¹Ÿæ˜¯æ™®é€šçš„æ–‡ä»¶æ“ä½œ

```c++
void GradeTable::LoadingFile_Grade()
{
	ifstream ifs("stu_grade.txt");
	if (!ifs)
	{
		cout << "æˆç»©å•æ–‡ä»¶ä¸å­˜åœ¨" << endl;
		return;
	}
	int stuid;
	char ch;
	ifs >> ch;//æ–‡ä»¶ä¸ºç©ºæ—¶ä¼šæœ‰ä¸€ä¸ªå­—ç¬¦ å¾—å…ˆæŠŠè¿™ä¸ªå­—ç¬¦è¯»å‡ºæ¥
	if (ifs.eof())
	{
		cout << "æ–‡ä»¶ä¸ºç©º" << endl;
		return;
	}
	while (!ifs.eof())//æ–‡ä»¶çš„æœ€åä¸€è¡Œåˆ«åŠ æ¢è¡Œ ä¸ç„¶æ²¡è¯»åˆ°å°¾å¯¼è‡´æœ€åä¸€è¡Œæ•°æ®è¯»ä¸¤æ¬¡
	{
		ifs >> stuid;
		set<CourseGrade>& PersonGrade = _stu_grade[stuid];//è¿™ä¸ªå­¦ç”Ÿçš„ä¸ªäººæˆç»©
		CourseGrade cousegrade;
		int couid; ifs >> couid; cousegrade._cou_id = couid;
		if (Judge(stuid, couid) == false)
		{
			/*printf("è¯»å–åˆ°é‡å¤æ•°æ®ï¼Œè¯·å‹¿é‡å¤è¯»å–\n");//è¿™ä¸ªå¯ä»¥é˜²æ­¢é‡å¤è¯»å–ä½†æ˜¯ä¿®æ”¹åçš„æ•°æ®æ— æ³•ä¿å­˜
			return;*/
			_stu_grade[stuid].erase(cousegrade);//é”®å€¼ç›¸åŒå°±èƒ½åˆ 
		}
		int grade; ifs >> grade; cousegrade._grade = grade;
		int ts; ifs >> ts;	_GIVE_TEST_STATIS(ts)	
		PersonGrade.insert(cousegrade);//åœ¨å­¦ç”Ÿçš„ä¸ªäººæˆç»©ä¸­åŠ å…¥è¿™é—¨è¯¾ç¨‹çš„æˆç»©
		cgtable._cou_grade[couid].insert(stuid);//è¯¾ç¨‹æˆç»©è¡¨[è¯¾ç¨‹å·].insert(å­¦å·) æŠŠè¿™ä¸ªå­¦ç”Ÿä¿¡æ¯åŠ å…¥è¯¾ç¨‹æˆç»©å•
	}
	cout << "æˆç»©å½•å…¥å®Œæ¯•" << endl;
}
void GradeTable::Hand_EnterGrade()
{
	ofstream ofs("stu_grade.txt",ios_base::app);
	int op = 1;
	int stuid;
	printf("è¯·è¾“å…¥å­¦å·ï¼š-> "); cin >> stuid;	_CHECK_STU_ID(stuid)
	set<CourseGrade>& PersonGrade = _stu_grade[stuid];
	while (op)
	{
		CourseGrade cousegrade;//å®šä¹‰ä¸€ä¸ªè¯¾ç¨‹æˆç»©
		printf("è¯·è¾“å…¥è¯¾ç¨‹å·ï¼š-> "); cin >> cousegrade._cou_id; 
		if (Judge(stuid, cousegrade._cou_id)==false)
		{
			printf("è¯¥å­¦ç”Ÿæˆç»©å·²ç»å­˜åœ¨ æ­¤æ¬¡è¾“å…¥å°†ä¼šè¦†ç›–åŸæœ¬ä¿¡æ¯ æ˜¯å¦ç»§ç»­ï¼Ÿ\n");
			printf("0. é€€å‡º 1. ç»§ç»­\n");
			int op;
			printf("è¯·è¾“å…¥ï¼š-> "); 
			vector<int>optional(op_01);
			set<int>sop;
			_OP_SITUATION	//è¿™é‡Œè¾“å…¥op		
		}
		printf("è¯·è¾“å…¥æˆç»©ï¼š-> "); cin >> cousegrade._grade;
		printf("è¯·è¾“å…¥è€ƒè¯•çŠ¶æ€ï¼š-> "); 
		int ts; cin >> ts;		_GIVE_TEST_STATIS(ts)
		if (cousegrade._grade > 100 || (ts != 0 && ts != 1))
		{
			cout << "è¾“å…¥æœ‰è¯¯,è¯·é‡æ–°è¾“å…¥" << endl;
		}
		else
		{
			PersonGrade.erase(cousegrade);//è¦†ç›–å‰å…ˆåˆ æ‰ç›¸åŒé”®å€¼çš„å¯¹è±¡
			PersonGrade.insert(cousegrade);
			cgtable._cou_grade[cousegrade._cou_id].insert(stuid);//è¯¾ç¨‹æˆç»©è¡¨å†…æ”¾å…¥è¿™ä¸ªå­¦å·
			ofs << "\n\n" << stuid << ' ' <<setw(4)<<setfill('0')<<cousegrade._cou_id << ' ' << cousegrade._grade <<' ' << cousegrade._ts;
			printf("å½•å…¥æˆåŠŸ\n");
		}
		printf("ç»§ç»­å½•å…¥æ­¤å­¦ç”Ÿçš„æˆç»©å—ï¼Ÿ "); printf("1.ç»§ç»­å½•å…¥    0.é€€å‡º\n");
		vector<int>optional(op_01);
		set<int>sop;
		_OP_SITUATION
	}
	
}
void Input_EnterStuGrade()
{
	int op;
	printf("1.åŠ è½½å­¦ç”Ÿæˆç»©æ–‡ä»¶   2.æ‰‹åŠ¨å½•å…¥  0.é€€å‡º\n");
	printf("è¯·è¾“å…¥ï¼š-> "); 
	vector<int>optional(op_012);
	set<int>sop;
	_OP_SITUATION
	while (op)
	{
		if (op == 1)
		{
			gtable.LoadingFile_Grade();
		}
		else if (op == 2)
		{
			gtable.Hand_EnterGrade();
		}
		else if (op == 0)
		{
			break;
		}
		else
		{
			cout << "è¾“å…¥é”™è¯¯ï¼Œé€€å‡ºã€‚" << endl;
			break;
		}
		printf("\nç»§ç»­å½•å…¥å—ï¼Ÿ"); printf("1.åŠ è½½å­¦ç”Ÿæ–‡ä»¶   2.æ‰‹åŠ¨å½•å…¥  0.é€€å‡º\n");
		printf("è¯·è¾“å…¥:-> ");_OP_SITUATION
	}
}
```

#### è¾“å‡ºå­¦ç”Ÿæˆç»©

```mermaid
graph LR
A(æŸ¥çœ‹/æŸ¥æ‰¾)-->B(æŸ¥çœ‹æŸé—¨è¯¾çš„æˆç»©/æŸ¥æ‰¾æŸé—¨è¯¾)
A-->C(æŸ¥çœ‹æŸå­¦ç”Ÿçš„æ‰€æœ‰æˆç»©/æŸ¥æ‰¾æŸå­¦ç”Ÿ)
A-->D(æŸ¥çœ‹æ‰€æœ‰äººæˆç»©/éå†æˆç»©è¡¨)
```

![image-20220515222317802](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515222317802.png)

```c++
ostream& operator<<(ostream& out, const CourseGrade& cou)
{
	Course& course=ctable._cou_table[cou._cou_id];//è¯¾ç¨‹è¡¨é‡Œæ‹¿åˆ°è¿™é—¨è¯¾çš„ä¿¡æ¯
	out << setw(20)<<course._name<<setw(5) << cou._grade<<setw(5)<<course._credit;
	if (cou._ts == Normal)
	{
		out << setw(20) << "è€ƒè¯•çŠ¶æ€ï¼šæ­£å¸¸";
	}
	else
	{
		out << setw(20) << "è€ƒè¯•çŠ¶æ€ï¼šä¸æ­£å¸¸";
	}
	out << endl;
	return out;
}
void Output()
{
	//AutoLoading();
	int op;
	printf("1.æŸ¥çœ‹æŸé—¨è¯¾çš„æˆç»©   2.æŸ¥çœ‹æŸå­¦ç”Ÿçš„æ‰€æœ‰æˆç»©  3.æŸ¥çœ‹æ‰€æœ‰äººçš„æ‰€æœ‰æˆç»©  0.é€€å‡º\n");
	printf("è¯·è¾“å…¥ï¼š-> ");
	vector<int>optional(op_04);
	set<int>sop;
	_OP_SITUATION
	while (op)
	{
		if (op == 1)
		{
			int couid;
			bool f = 0;
			printf("è¯·è¾“å…¥è¯¾ç¨‹å·ï¼š-> "); cin >> couid;
			if (ctable._cou_table.find(couid) == ctable._cou_table.end())
			{
				cout << "è¯¾ç¨‹ä¸å­˜åœ¨" << endl;
				printf("\nç»§ç»­æŸ¥çœ‹å—ï¼Ÿ"); printf("1.æŸ¥çœ‹æŸé—¨è¯¾çš„æˆç»©   2.æŸ¥çœ‹æŸå­¦ç”Ÿçš„æ‰€æœ‰æˆç»©  3.æŸ¥çœ‹æ‰€æœ‰äººçš„æ‰€æœ‰æˆç»©  0.é€€å‡º\n");
				printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
				continue;
			}
			set<int>& stuid = cgtable._cou_grade[couid];//ä»è¯¾ç¨‹æˆç»©è¡¨ä¸­æ‹¿åˆ°è¿™é—¨è¯¾çš„é›†åˆ
			for (auto e : stuid)
			{
				set<CourseGrade>PersonGrade=gtable._stu_grade[e];//é€šè¿‡å­¦å·æ‹¿åˆ°è¿™ä¸ªå­¦ç”Ÿçš„æ‰€æœ‰æˆç»©
				auto it = PersonGrade.find(CourseGrade(couid));//è¿™ä¸ªå­¦ç”Ÿé€‰äº†è¿™é—¨è¯¾å—ï¼Ÿ
				if (it!=PersonGrade.end())//é€‰äº†
				{
					f = 1;
					Student& student = stable._stu_table[e];//æ‹¿åˆ°å­¦ç”Ÿçš„ä¸ªäººä¿¡æ¯
					cout << setw(10) << student._id << setw(10) << student._name << *it;//æ‰“å°*itä¼šæ‰“å°è¿™é—¨è¯¾çš„åå­—ã€æˆç»©å’Œè€ƒè¯•çŠ¶æ€
				}
			}
			if (f == 0)
			{
				cout << "è¯¥è¯¾ç¨‹æ— æˆç»©" << endl;
			}
		}
		else if (op == 2)
		{
			int stuid;
			printf("è¯·è¾“å…¥å­¦å·ï¼š-> "); cin >> stuid;
			if (stable._stu_table.find(stuid) == stable._stu_table.end())//å­¦ç”Ÿè¡¨é‡Œæœ‰è¿™ä¸ªäººå—ï¼Ÿ
			{
				cout << "å­¦ç”Ÿä¸å­˜åœ¨" << endl;
				printf("\nç»§ç»­æŸ¥çœ‹å—ï¼Ÿ"); printf("1.æŸ¥çœ‹æŸé—¨è¯¾çš„æˆç»©   2.æŸ¥çœ‹æŸå­¦ç”Ÿçš„æ‰€æœ‰æˆç»©  3.æŸ¥çœ‹æ‰€æœ‰äººçš„æ‰€æœ‰æˆç»©  0.é€€å‡º\n");
				printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
				continue;
			}
			Student& student = stable._stu_table[stuid]; _CHECK_STU_ID(stuid)//å­˜åœ¨æ£€æŸ¥å­¦å·åˆç†æ€§
			set<CourseGrade>& PersonGrade = gtable._stu_grade[stuid];//æ‹¿åˆ°å­¦ç”Ÿçš„æ‰€æœ‰æˆç»©
			for (auto e : PersonGrade)//æ‹¿åˆ°è¿™ä¸ªå­¦ç”Ÿæ¯ä¸€é—¨çš„æˆç»©
			{
				cout << setw(10) << student._id << setw(10) << student._name << "   " << e;
			}
		}
		else if (op == 3)
		{
			SetColor(0x06);
			for (auto e : gtable._stu_grade)
			{
				Student& student = stable._stu_table[e.first];//æ‰¾åˆ°è¿™ä¸ªå­¦ç”Ÿ
				cout << left<<setw(10) << student._id << setw(10) << student._name << endl;//è¾“å‡ºä¸‹å­¦ç”Ÿä¿¡æ¯
				set<CourseGrade>& grade = e.second;//æ‰¾åˆ°è¿™ä¸ªå­¦ç”Ÿçš„æ‰€æœ‰æˆç»©
				set<CourseGrade>::iterator it = grade.end(); it--;//æŒ‰è¯¾ç¨‹å·å‡åºæ¥è¾“å‡º
				while (it != grade.begin())//è®¿é—®é™¤ç¬¬ä¸€é—¨ä¹‹å¤–çš„æˆç»©
				{
					Course& course = ctable._cou_table[it->_cou_id];
					printf("%04d   ", course._id);
					cout << *it << endl;
					it--;
				}
				Course& course = ctable._cou_table[it->_cou_id];//è®¿é—®ç¬¬ä¸€é—¨è¯¾ç¨‹
				printf("%04d   ", course._id);
				cout << *it << endl;

				/*for (auto e2 : grade)
				{
				//è¯¾ç¨‹å·é€†åºæ‰“å°
					Course& course = ctable._cou_table[e2._cou_id];
					printf("%04d   ", course._id);
					cout << e2 << endl;
				}*/
				
			}
		}
		else if (op == 0)
		{
			break;
		}
		printf("\nç»§ç»­æŸ¥çœ‹å—ï¼Ÿ"); printf("1.æŸ¥çœ‹æŸé—¨è¯¾çš„æˆç»©   2.æŸ¥çœ‹æŸå­¦ç”Ÿçš„æ‰€æœ‰æˆç»©  3.æŸ¥çœ‹æ‰€æœ‰äººçš„æ‰€æœ‰æˆç»©  0.é€€å‡º\n");
		printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
	}
}
```

#### åˆ é™¤

```mermaid
graph LR
A(åˆ é™¤)-->B(åˆ é™¤è¯¾ç¨‹==åˆ é™¤è¯¾ç¨‹ä¿¡æ¯å’Œè¿™é—¨è¯¾ç¨‹çš„æˆç»©)
A-->C(åˆ é™¤å­¦ç”Ÿ==åˆ é™¤å­¦ç”Ÿä¿¡æ¯å’Œè¿™é—¨è¯¾ç¨‹çš„æ‰€æœ‰æˆç»©)
```

```c++
void Erase()
{
	int op;
	printf("1.åˆ é™¤æŸé—¨è¯¾   2.åˆ é™¤æŸå­¦ç”Ÿ  0.é€€å‡º\n");
	printf("è¯·è¾“å…¥ï¼š-> "); 
	vector<int>optional(op_012);
	set<int>sop;
	_OP_SITUATION
	while (op)
	{
		if (op == 1)
		{
			int couid;
			bool f = 0;
			printf("è¯·è¾“å…¥è¯¾ç¨‹å·ï¼š-> "); cin >> couid; 
			if (ctable._cou_table.find(couid) == ctable._cou_table.end())
			{
				cout << "è¯¾ç¨‹ä¸å­˜åœ¨" << endl;
				printf("\nç»§ç»­åˆ é™¤å—ï¼Ÿ"); printf("1.åˆ é™¤æŸé—¨è¯¾   2.åˆ é™¤æŸå­¦ç”Ÿ  0.é€€å‡º\n");
				printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
				continue;
			}
			ctable._cou_table.erase(couid);//è¯¾ç¨‹ä¿¡æ¯è¡¨é‡Œåˆ æ‰è¿™é—¨è¯¾
			set<int>& stuid = cgtable._cou_grade[couid];//æ‰¾åˆ°è¿™é—¨è¯¾çš„å­¦å·é›†åˆ å†æŠŠé‡Œé¢æ¯ä¸ªå­¦ç”Ÿè¿™é—¨è¯¾çš„æˆç»©åˆ æ‰
			for (auto e : stuid)
			{
				set<CourseGrade>& PersonGrade = gtable._stu_grade[e];//è¿™ä¸ªå­¦ç”Ÿçš„ä¸ªäººæ‰€æœ‰ç§‘ç›®çš„æˆç»©
				auto it = PersonGrade.find(CourseGrade(couid));//æœ‰æ²¡æœ‰è¿™é—¨è¯¾
				if (it != PersonGrade.end())
				{
					PersonGrade.erase(it);//æœ‰çš„è¯ç›´æ¥åˆ 
				}//æ²¡æœ‰è¯´æ˜æ²¡é€‰å°±ä¸è¦æ“ä½œäº†
			}
			cout << "åˆ é™¤æˆåŠŸ" << endl;
		}
		else if (op == 2)
		{
			int stuid;
			printf("è¯·è¾“å…¥å­¦å·ï¼š-> "); cin >> stuid;
			if (stable._stu_table.find(stuid) == stable._stu_table.end())//æœ‰æ²¡æœ‰è¿™ä¸ªå­¦ç”Ÿ
			{
				cout << "å­¦ç”Ÿä¸å­˜åœ¨" << endl;
				printf("\nç»§ç»­åˆ é™¤å—ï¼Ÿ"); printf("1.åˆ é™¤æŸé—¨è¯¾   2.åˆ é™¤æŸå­¦ç”Ÿ  0.é€€å‡º\n");
				printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
				continue;
			}
			gtable._stu_grade.erase(stuid);//æˆç»©è¡¨é‡Œç›´æ¥æŠŠå­¦ç”Ÿä¿¡æ¯æ‹¿èµ°  è¯¾ç¨‹æˆç»©å•çš„ä¿¡æ¯æ¥è‡ªäºæ€»æˆç»©å• æ€»æˆç»©å•æ²¡äº†è¯¾ç¨‹æˆç»©å•ä¹Ÿå°±æ²¡äº†
			stable._stu_table.erase(stuid);//å­¦ç”Ÿä¿¡æ¯è¡¨é‡ŒæŠŠå­¦ç”Ÿæ‹¿èµ°
			cout << "åˆ é™¤æˆåŠŸ" << endl;
		}
		else if (op == 0)
		{
			break;
		}
		printf("\nç»§ç»­åˆ é™¤å—ï¼Ÿ"); printf("1.åˆ é™¤æŸé—¨è¯¾   2.åˆ é™¤æŸå­¦ç”Ÿ  0.é€€å‡º\n");
		printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
	}
}
```

> åˆ é™¤æˆç»©å®é™…ä¸Šæœ‰ç‚¹å°bugï¼Œåˆ é™¤åç¬¬äºŒæ¬¡è¿è¡Œç¨‹åºå‘ç°æœ¬æ¥è¦åˆ çš„å¹¶æ²¡æœ‰è¢«åˆ é™¤ï¼Œå› ä¸ºåˆ é™¤æ“ä½œæ²¡æœ‰ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œç¬¬äºŒæ¬¡è¿è¡Œç¨‹åºè¯»å–æ–‡ä»¶æ—¶åˆ é™¤çš„æ•°æ®ä¼šè¢«é‡æ–°è¯»å–ï¼Œæƒ³è§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥åœ¨æ–‡æœ¬æ–‡ä»¶ä¸­åŠ ä¸€ä¸ªæ ‡å¿—æ¥è¡¨ç¤ºè¯¥è¯¾ç¨‹/å­¦ç”Ÿæ˜¯å¦è¢«åˆ é™¤ï¼Œæ¯”å¦‚åœ¨åˆ é™¤è¯¾ç¨‹æ—¶æŠŠåˆ é™¤çš„ä¿¡æ¯å†™å…¥è¯¾ç¨‹æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨è¿™äº›ä¿¡æ¯åé¢åŠ ä¸€ä¸ª0è¡¨ç¤ºè¯¥è¯¾ç¨‹å·²ç»è¢«åˆ é™¤ï¼Œä½†ç”±äºè¿›è¡Œè¿™ä¸ªæ“ä½œéœ€è¦ä¿®æ”¹ç°æœ‰çš„å‡ ä¸ªæ–‡ä»¶æ“ä½œå‡½æ•°æ‰€æœ‰å°±æ²¡æœ‰å®ç°

#### ä¿®æ”¹

ä¿®æ”¹çš„æ“ä½œä¼šè¢«ä¿å­˜ï¼Œä¿®æ”¹æ—¶ä¼šæŠŠæ•°æ®å†™å…¥æ–‡ä»¶ï¼Œç¬¬äºŒæ¬¡è¯»å–æ—¶ä¼šé‡‡ç”¨è¦†ç›–å¼çš„åŠæ³•ï¼Œå³ä¿®æ”¹åçš„æ•°æ®è¦†ç›–ä¿®æ”¹å‰çš„æ•°æ®è¾¾åˆ°æ•°æ®ä¿®æ”¹åè¢«ä¿å­˜çš„æ•ˆæœ

```mermaid
graph LR
A(ä¿®æ”¹)-->B(ä¿®æ”¹è¯¾ç¨‹)
A-->C(ä¿®æ”¹å­¦ç”Ÿ)
C-->D(ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯)
C-->E(ä¿®æ”¹å­¦ç”Ÿæˆç»©)
```

```c++
void Update()
{
	int op;
	printf("1.ä¿®æ”¹æŸé—¨è¯¾   2.ä¿®æ”¹æŸå­¦ç”Ÿ  0.é€€å‡º\n");
	printf("è¯·è¾“å…¥ï¼š-> "); 
	vector<int>optional(op_012);
	set<int>sop;
	_OP_SITUATION
	while (op)
	{
		if (op == 1)
		{
			
			ctable.Hand_EnterInfo();
			
		}
		else if (op == 2)
		{
			int x;
			printf("1. ä¿®æ”¹å­¦ç”Ÿçš„æˆç»©  2.ä¿®æ”¹å­¦ç”Ÿçš„ä¿¡æ¯  0.é€€å‡º\n");  cin>> x;
			if (x == 2)
			{
				stable.Hand_EnterInfo();
			}
			else if(x==1)
			{
				gtable.Hand_EnterGrade();
			}
			else
			{
				;
			}
		}
		else if (op == 0)
		{
			break;
		}
		printf("\nç»§ç»­ä¿®æ”¹å—ï¼Ÿ"); printf("1.ä¿®æ”¹æŸé—¨è¯¾   2.ä¿®æ”¹æŸå­¦ç”Ÿ  0.é€€å‡º\n");
		printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
	}
}
```



#### æ’åº



```mermaid
graph LR
A(æ’åº)-->B(æŒ‰å•ç§‘æˆç»©æ’åº)
A-->C(å­¦å·æ’åº)
A-->D(æ€»åˆ†æ’åº)
A-->E(å¾—åˆ°æœ€é«˜åˆ†)
```

> å¾—åˆ°åŠæ ¼ç‡ç­‰çš„å®ç°ä¹Ÿå°±æ˜¯éå†è¯¾ç¨‹è¡¨ï¼Œæ€æƒ³å¾ˆç›¸ä¼¼æ‰€ä»¥ä¸‹é¢æ²¡æœ‰å®ç°

bool cmp_grade(const PAIR& e1,const PAIR& e2 )æ˜¯è‡ªå®šä¹‰mapæ’åºæ˜¯éœ€è¦ç”¨åˆ°çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„æ’åºè§„åˆ™

```c++
bool cmp_grade(const PAIR& e1,const PAIR& e2 )//è‡ªå®šä¹‰mapæ’åº
{
	if (e1.second < e2.second)
	{
		return false;
	}
	else if (e1.second == e2.second)
	{
		if (e1.first < e2.first)
		{
			return false;
		}
	}
}
void Sort()
{
	int op;
	printf("1.æŒ‰å•ç§‘æˆç»©æ’åº   2.æŒ‰å­¦å·æ’åº  3.æŒ‰æ€»åˆ†æ’åº  4.å¾—åˆ°å•ç§‘æœ€é«˜åˆ†   0.é€€å‡º\n");
	printf("è¯·è¾“å…¥ï¼š-> "); 
	vector<int>optional(op_05);
	set<int>sop;
	_OP_SITUATION
	while (op)
	{
		map<int, int>id_grade;//idå’Œæˆç»©
		map<int, int>id_status;//å­¦å·å’Œè¿™é—¨è¯¾çš„è€ƒè¯•çŠ¶æ€
		map<int, int>id_total;//å­¦å·å’Œæ€»åˆ†
		if (op == 1)
		{
			SetColor(0x0a);
			int couid;
			bool f = 0;//çœ‹è¿™é—¨è¯¾å­˜åœ¨åæ˜¯å¦æœ‰æ— æˆç»©
			printf("è¯·è¾“å…¥è¯¾ç¨‹å·ï¼š-> "); cin >> couid;
			if (ctable._cou_table.find(couid) == ctable._cou_table.end())//è¯¾ç¨‹ä¸å­˜åœ¨
			{
				cout << "è¯¾ç¨‹ä¸å­˜åœ¨" << endl;
				printf("\nç»§ç»­æŸ¥çœ‹å—ï¼Ÿ"); printf("1.æŒ‰å•ç§‘æˆç»©æ’åº   2.æŒ‰å­¦å·æ’åº  3.æŒ‰æ€»åˆ†æ’åº  4.å¾—åˆ°å•ç§‘æœ€é«˜åˆ†   0.é€€å‡º\n");
				printf("è¯·è¾“å…¥:-> "); 
				vector<int>optional(op_05);
				set<int>sop;
				_OP_SITUATION
				continue;
			}
			set<int>& stuid = cgtable._cou_grade[couid];//æ‹¿åˆ°è¿™é—¨è¯¾çš„å­¦å·é›†åˆ	
			for (auto e : stuid)
			{
				set<CourseGrade>PersonGrade = gtable._stu_grade[e];
				auto it = PersonGrade.find(CourseGrade(couid));//æ‰¾åˆ°è¿™é—¨è¯¾çš„æˆç»©
				if (it != PersonGrade.end())//*it å¾—åˆ°è¯¾ç¨‹çš„æˆç»©
				{
					f = 1;
					id_grade[e] = it->_grade;//å–å‡ºè¿™é—¨è¯¾çš„æˆç»©
					if (it->_ts == Normal)
					{
						id_status[e] = 1;//å–å‡ºè¿™é—¨è¯¾çš„è€ƒè¯•çŠ¶æ€
					}
					else
					{
						id_status[e] = 0;
					}	
				}
			}
			if (f == 0)
			{
				cout << "è¯¥è¯¾ç¨‹æ— æˆç»©" << endl;
			}
			else
			{
				Course& course = ctable._cou_table[couid];//è¯¾ç¨‹è¡¨é‡Œæ‹¿åˆ°è¿™é—¨è¯¾çš„ä¿¡æ¯
				vector<PAIR>v_grade(id_grade.begin(), id_grade.end());
				sort(v_grade.begin(), v_grade.end(), cmp_grade);//æ’åº
				for (auto e : v_grade)//è¾“å‡ºæ’åºåçš„ä¿¡æ¯
				{
					Student& student = stable._stu_table[e.first];//å¾—åˆ°å­¦ç”Ÿçš„ä¿¡æ¯
					cout <<left<< setw(20) << course._name;
					cout <<left<< setw(10) << student._id << setw(10) << student._name << setw(5) << e.second;
					if (id_status[e.first] == 1)
					{
						cout << setw(20) << "è€ƒè¯•çŠ¶æ€ï¼šæ­£å¸¸" << endl;
					}
					else
					{
						cout << setw(20) << "è€ƒè¯•çŠ¶æ€ï¼šä¸æ­£å¸¸" << endl;
					}
				}
			}
			
		}
		else if (op == 2)
		{
			SetColor(0x03);
			Output();//é»˜è®¤è¾“å‡ºå°±æ˜¯æŒ‰å­¦å·æ’åºçš„
		}
		else if (op == 3)
		{
			SetColor(0x0b);
			for (auto e1 : gtable._stu_grade)//éå†
			{
				//e1æ˜¯å­¦å·å’Œä¸ªäººæˆç»©çš„é›†åˆ
				int total=0;//è®°å½•æ€»åˆ†
				for (auto e2 : e1.second)//éå†è¿™ä¸ªäººçš„æ‰€æœ‰æˆç»©
				{
					total += e2._grade;
				}
				id_total[e1.first] = total;//æŠŠæ€»åˆ†æ”¾å…¥é›†åˆ ä¸å­¦å·ç›¸å¯¹åº”
			}
			vector<PAIR>v_total(id_total.begin(), id_total.end());//æ€»åˆ†
			if (v_total.size() == 0)
			{
				cout << "æˆç»©è¡¨ä¸ºç©º" << endl;
				printf("\nç»§ç»­æŸ¥çœ‹å—ï¼Ÿ"); printf("1.æŒ‰å•ç§‘æˆç»©æ’åº   2.æŒ‰å­¦å·æ’åº  3.æŒ‰æ€»åˆ†æ’åº  4.å¾—åˆ°å•ç§‘æœ€é«˜åˆ†   0.é€€å‡º\n");
				printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
				continue;
			}
			sort(v_total.begin(), v_total.end(), cmp_grade);
			for (auto e : v_total)//æ’åºåè¾“å‡º
			{
				Student& student = stable._stu_table[e.first];//å¾—åˆ°å­¦ç”Ÿçš„ä¿¡æ¯
				cout << setw(10) << student._id << setw(10) << student._name << setw(5) << e.second << endl;
			}
		}
		else if (op == 4)
		{
			SetColor(0x0c);
			int couid;
			bool f = 0;
			printf("è¯·è¾“å…¥è¯¾ç¨‹å·ï¼š-> "); cin >> couid;
			if (ctable._cou_table.find(couid) == ctable._cou_table.end())
			{
				cout << "è¯¾ç¨‹ä¸å­˜åœ¨" << endl;
				printf("\nç»§ç»­æŸ¥çœ‹å—ï¼Ÿ"); printf("1.æŒ‰å•ç§‘æˆç»©æ’åº   2.æŒ‰å­¦å·æ’åº  3.æŒ‰æ€»åˆ†æ’åº  4.å¾—åˆ°å•ç§‘æœ€é«˜åˆ†   0.é€€å‡º\n");
				printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
				continue;
			}
			set<int>& stuid = cgtable._cou_grade[couid];
			for (auto e : stuid)
			{
				set<CourseGrade>PersonGrade = gtable._stu_grade[e];
				auto it = PersonGrade.find(CourseGrade(couid));//æ‹¿åˆ°ä¸ªäººæ‰€æœ‰æˆç»©
				if (it != PersonGrade.end())//*it å¾—åˆ°è¯¾ç¨‹çš„æˆç»©
				{
					f = 1;
					id_grade[e] = it->_grade;
					if (it->_ts == Normal)
					{
						id_status[e] = 1;
					}
					else
					{
						id_status[e] = 0;
					}

				}
			}
			if (f == 0)
			{
				cout << "è¯¥è¯¾ç¨‹æ— æˆç»©" << endl;
			}
			else
			{
				vector<PAIR>v_grade(id_grade.begin(), id_grade.end());
				sort(v_grade.begin(), v_grade.end(), cmp_grade);
				auto e = v_grade.begin();//æ’åº
				Student& student = stable._stu_table[e->first];//å¾—åˆ°å­¦ç”Ÿçš„ä¿¡æ¯
				cout <<setw(20)<<ctable._cou_table[couid]._name;
				cout << setw(10) << student._id << setw(10) << student._name << setw(5) << e->second;
				if (id_status[e->first] == 1)//è¾“å‡ºè€ƒè¯•çŠ¶æ€
				{
					cout << setw(20) << "è€ƒè¯•çŠ¶æ€ï¼šæ­£å¸¸" << endl;
				}
				else
				{
					cout << setw(20) << "è€ƒè¯•çŠ¶æ€ï¼šä¸æ­£å¸¸" << endl;
				}
				
			}			
		}
		else if (op == 0)
		{
			break;
		}
		printf("1.æŒ‰å•ç§‘æˆç»©æ’åº   2.æŒ‰å­¦å·æ’åº  3.æŒ‰æ€»åˆ†æ’åº  4.å¾—åˆ°å•ç§‘æœ€é«˜åˆ†  0.é€€å‡º\n");
		printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
	}
}
```

#### è®¾ç½®å­—ä½“é¢œè‰²

çœ‹ä¸æ‡‚çš„è¯å½“æ¿å­å¥—ä¸Šå»å°±è¡Œï¼ŒSetColor(07)å°±ç›¸å½“äºsystem("color 07")ï¼Œå¯ä»¥ç†è§£ä¸ºå¦ä¸€ç§æ”¹å˜æ§åˆ¶å°å­—ä½“é¢œè‰²çš„æ–¹å¼ã€‚

> ä¼ åå…­è¿›åˆ¶æ•°å­—å¾—è¡¨æ˜æ•°å­—æ˜¯åå…­è¿›åˆ¶ æ¯”å¦‚è¦ç©¿0aå¾—å†™æˆ0x0aï¼Œå‘Šè¯‰ç¼–è¯‘å™¨è¿™æ˜¯ä¸ªåå…­è¿›åˆ¶æ•°

![image-20220515223932825](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515223932825.png)



```c++
void SetColor(int hex = 07)
{
	SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), hex);
}
```

> è¿˜å†™äº†ä¸ªSetSize()æ¥æ§åˆ¶æ§åˆ¶å°å¤§å°ï¼Œä½†æ˜¯è°ƒç”¨SetSize()å¯¼è‡´æ§åˆ¶å°å³ä¾§çš„æ»šè½®æ¶ˆå¤±ï¼Œä½¿å¾—åªèƒ½çœ‹åˆ°ä¸€é¡µæ•°æ®ï¼ˆæ»šè½®æ¶ˆå¤±äº†ä¸èƒ½å‘ä¸Šç¿»ï¼‰
>
> ![image-20220515224619439](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515224619439.png)



#### è‡ªåŠ¨è¯»å–æ–‡ä»¶

å…¶å®å°±æ˜¯ä¸€æ¬¡æ€§è°ƒç”¨å‡ ä¸ªè¯»å–æ–‡ä»¶çš„å‡½æ•°è¾¾åˆ°ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ–‡ä»¶çš„æ•ˆæœ

```c++
void AutoLoading()
{
	stable.LoadingFile_Stu();
	ctable.LoadingFile_Cou();
	gtable.LoadingFile_Grade();
}
```

![image-20220515224734953](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515224734953.png)



#### ç™»å½•å’Œå¯†ç åŠ å¯†

è¾“å…¥å¯†ç å¯ä»¥å°±åœ¨æœ¬åœ°å­˜ä¸€ä¸ªè´¦å·å¯†ç æ–‡ä»¶ï¼Œç„¶åå»çœ‹æ–‡ä»¶å­˜ä¸å­˜åœ¨ï¼Œå­˜åœ¨å°±è¯»å–æ–‡ä»¶ä¸å­˜åœ¨å°±æ‰‹åŠ¨è¾“å…¥ã€‚è¿™å°±æ˜¯è‡ªåŠ¨ç™»å½•çš„æ€è·¯äº†ï¼Œå¦‚æœä»æ–‡ä»¶ä¸­è¯»å–çš„æ•°æ®æ­£ç¡®åˆ™ç™»å½•æˆåŠŸï¼Œå¦åˆ™éƒ½æ˜¯ç™»å½•å¤±è´¥.

![image-20220515224959557](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220515224959557.png)

```c++
void KeyBoardMonitor()//ç›‘æµ‹é”®ç›˜æ˜¯å¦æœ‰è¾“å…¥
{
	char* s = new char[10];
	bool f = 0;
	printf("è¯·æŒ‰ä»»æ„é”®ç»§ç»­:->");
	while (1)//è¿™é‡Œä¸€ç›´åœ¨å¾ªç¯  
	{
		while (_kbhit())//é”®ç›˜è¾“å…¥å_kbhit()è¿”å›é”®ç  å¦åˆ™è¿”å›0
		{
			//cout << "å·²ç»æŒ‰é”®" << endl;
			f = 1;
			return;
		}
	}
}
bool AutoLogin()
{
	SetColor(0x0b);
	ifstream ifs("account.txt");
	if (!ifs)
	{
		cout << "\nè´¦å·å¯†ç æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ— æ³•è‡ªåŠ¨ç™»å½•\n" << endl; KeyBoardMonitor();
		return false;
	}
	char ch;
	ifs >> ch;//è¯»å‡ºä¸€ä¸ªå­—ç¬¦  åˆ¤æ–­æ˜¯å¦ä¸ºç©ºæ–‡ä»¶
	if (ifs.eof())
	{
		cout << "\næ–‡ä»¶ä¸ºç©º\n" << endl; KeyBoardMonitor();
		return false;
	}

	//åˆ°è¿™é‡Œè¯´æ˜æ–‡ä»¶å­˜åœ¨ å¼€å§‹è¯»å–æ–‡ä»¶å†…å®¹
	string id, password;
	ifs >> id >> password;
	if (id == "123456" && password == "123456")
	{
		return true;//æˆåŠŸç™»é™†
	}
	else
	{
		cout << "\nè´¦å·å¯†ç æ–‡ä»¶ä¿¡æ¯é”™è¯¯\n" << endl; KeyBoardMonitor();
		return false;
	}
}
bool Login()
{
	system("color 02");
	string id,ps;
	printf("\n\n***********************\n");
	printf("*****   ç™»å½•ç•Œé¢   ****\n");
	printf("è´¦å·->: "); cin >> id;
	printf("å¯†ç ->: "); 
	char ch;
	while (ps.size()<20&&(ch = _getch()) != '\r')
	{
		if (ch != '\b')
		{
			ps += ch;
			putchar('*');
		}
		else
		{
            if (ps.size() >= 1)
			{
				ps.erase(ps.size() - 1);//BackSpaceé”®çš„ç›®çš„æ˜¯åˆ é™¤å­—ç¬¦ æ‰€ä»¥è¦æ›´æ–°ä¸€ä¸‹ps
				putchar('\b');
				putchar(' ');
				putchar('\b');
			}
		}
	}
	if (id == "123456" && ps == "123456")//è®¾ç½®è´¦å·å¯†ç 
	{
		return true;
	}
	return false;
}
```

> _kbhit()çš„å¤´æ–‡ä»¶æ˜¯conio.h
>
> _getch()çš„å¤´æ–‡ä»¶æ˜¯conio.h
>
> _getch()çš„ä½œç”¨æ˜¯è®©ä½ çš„è¾“å…¥ä¸æ˜¾ç¤ºåœ¨å±å¹•ä¸Šè€Œæ˜¯ç•™åœ¨ç¼“å†²åŒºé‡Œï¼Œæ­¤å¤–'\r'è¡¨ç¤ºå›è½¦ç¬¦ï¼Œâ€˜\bâ€™ç›¸å½“äºæˆ‘ä»¬é”®ç›˜ä¸Šçš„BackSpace,éœ€è¦æ³¨æ„æŒ‰äº†â€˜\bâ€™åå¯¹å¯†ç å­—ç¬¦ä¸²çš„å¤„ç†

#### èœå•

è°ƒç”¨ä¸Šé¢å†™çš„å¢åˆ æŸ¥è¯¥ç­‰å‡½æ•°

æ¯ä¸€æ¬¡æ“ä½œå®Œéƒ½å¯ä»¥å›åˆ°ä¸»ç•Œé¢ï¼Œä½¿å¾—å¯ä»¥ä¸€æ¬¡è¿è¡Œå¤šæ¬¡æ“ä½œ

```c++
void menu()
{
	SetColor(0x0A);
	
	MENU
	int op;
	printf("è¯·è¾“å…¥ï¼š "); 
	vector<int>optional(op_09);
	set<int>sop;
	_OP_SITUATION
	while (op!=0)
	{
		switch (op)
		{
	
		case 0:
			break;
		case 1:
			SetColor(0x0a);
			Input_EnterStuInfo();
			break;
		case 2:
			SetColor(0x0b);
			Input_EnterCouInfo();
			break;
		case 3:
			SetColor(0x0c);
			Input_EnterStuGrade();
			break;
		case 4:
			SetColor(0x03);
			Output();
			break;
		case 5:
			SetColor(0x0a);
			Erase();
			break;
		case 6:
			SetColor(0x0b);
			Update();
			break;
		case 7:
			SetColor(0x0c);
			Sort();
			break;
		case 8:
			SetColor(0x0b);
			AutoLoading();
			break;
		}
		printf("\n\n");
		system("cls");
		SetColor(0x0A);
		MENU
		printf("è¯·è¾“å…¥:-> "); _OP_SITUATION
	}
}
```

#### å¯åŠ¨

è´Ÿè´£ç™»å½•æˆåŠŸåè°ƒç”¨èœå•å‡½æ•°

```c++
void Start()
{
	SetColor(0x0b);	
	int op = 1;
	printf("\n\n1.æ‰‹åŠ¨ç™»å½• 2.è‡ªåŠ¨ç™»å½• 0. é€€å‡º");
	printf("è¯·è¾“å…¥ï¼š-> ");
	vector<int>optional(op_012);
	set<int>sop;
	_OP_SITUATION
	while (op)
	{	
		if(op==1)
		{
			if (Login())
			{
				system("cls");
				menu();
				break;
			}
			else
			{
				_AGAIN_LOGIN
			}
		}
		else if (op == 2)
		{
			if (AutoLogin())
			{
				system("cls");
				menu();
				break;
			}
			else
			{
				_AGAIN_LOGIN
			}
		}		
	}	
}
```

### **<font color=40E0D0>main.cpp</font>**

```c++
#include "GradeManagement.h"
#include "operator.h"
int main()
{
	CONSOLE_FONT_INFOEX cfi;
	cfi.cbSize = sizeof cfi;//å¿…é¡»å†™ä¸ç„¶ä¸èƒ½æˆåŠŸè°ƒç”¨
	cfi.FontWeight = 5000;//å­—ä½“ç²—ç»†
	cfi.dwFontSize.Y = 20;//é«˜åº¦
	cfi.dwFontSize.X = 0;//å®½åº¦
	SetCurrentConsoleFontEx(GetStdHandle(STD_OUTPUT_HANDLE), true, &cfi);//è°ƒç”¨
//ä¸Šé¢æ˜¯æ§åˆ¶å­—ä½“çš„å¤§å°
    
	SetConsoleTitle(LPCTSTR(L"æˆç»©ç®¡ç†ç³»ç»Ÿ"));//æ”¹ä¸€ä¸‹æ§åˆ¶å°çš„æ ‡ç­¾
	InitOption();//åˆå§‹åŒ–ä¸€ä¸‹å‡ ä¸ªå…³äºopçš„vector

	Start();//å¯åŠ¨
	return 0;
}
```

> è°ƒæ•´å­—ä½“ä¼ é€é—¨ğŸ‘‰ğŸ‘‰ [CONSOLE_FONT_INFOEX ç»“æ„ - Windows Console | Microsoft Docs](https://docs.microsoft.com/zh-cn/windows/console/console-font-infoex)

## æ€»ç»“

ä¸€å—ä¸€å—çš„ç –ç»ˆç©¶è¿˜æ˜¯ç Œæˆäº†è¿™åº§å°æˆ¿å­